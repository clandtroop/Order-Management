<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>American Medical Order Managment System</title>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        const DMEOrderSystem = () => {
            const [activeTab, setActiveTab] = useState('orders');
            const [orders, setOrders] = useState([
                {
                    id: 1,
                    orderNumber: 'DME-001',
                    patientName: 'John Doe',
                    orderType: 'Wheelchair',
                    salesRep: 'Sarah Johnson',
                    dateReceived: '2026-01-10',
                    status: 'In Progress',
                    tasks: [
                        { task: 'Verify insurance', completed: true },
                        { task: 'Order equipment', completed: true },
                        { task: 'Schedule delivery', completed: false },
                        { task: 'Complete delivery', completed: false }
                    ]
                },
                {
                    id: 2,
                    orderNumber: 'DME-002',
                    patientName: 'Jane Smith',
                    orderType: 'CPAP Machine',
                    salesRep: 'Mike Chen',
                    dateReceived: '2026-01-12',
                    status: 'New',
                    tasks: [
                        { task: 'Verify insurance', completed: false },
                        { task: 'Order equipment', completed: false },
                        { task: 'Schedule delivery', completed: false },
                        { task: 'Complete delivery', completed: false }
                    ]
                }
            ]);

            const orderTypes = ['CPAP', 'BiPAP', 'RAD (E0471)', 'Vent - NIV', 'Wheelchair', 'Hospital Bed', 'Walker/Rollator', 'Oxygen W/ POC', 'Oxyegen W/ Tanks', 'Nebulizer', ];
            const salesReps = ['Gena Morrow', 'Jordan Henderson',];
            const statuses = ['New', 'In Progress', 'Completed', 'On Hold - Pending Order', 'On Hold - Pending Notes', ];

            const [newOrder, setNewOrder] = useState({
                orderNumber: '',
                patientName: '',
                orderType: orderTypes[0],
                salesRep: salesReps[0],
                dateReceived: new Date().toISOString().split('T')[0],
                status: 'New'
            });

            const defaultTasks = [
                { task: 'Verify insurance', completed: false },
                { task: 'Schedule delivery', completed: false },
                { task: 'Ready to Manifest', completed: false }
            ];

            const addOrder = () => {
                if (!newOrder.orderNumber || !newOrder.patientName) {
                    alert('Please fill in Order Number and Patient Name');
                    return;
                }

                const order = {
                    id: Date.now(),
                    ...newOrder,
                    tasks: [...defaultTasks]
                };

                setOrders([...orders, order]);
                setNewOrder({
                    orderNumber: '',
                    patientName: '',
                    orderType: orderTypes[0],
                    salesRep: salesReps[0],
                    dateReceived: new Date().toISOString().split('T')[0],
                    status: 'New'
                });
            };

            const deleteOrder = (id) => {
                setOrders(orders.filter(order => order.id !== id));
            };

            const toggleTask = (orderId, taskIndex) => {
                setOrders(orders.map(order => {
                    if (order.id === orderId) {
                        const newTasks = [...order.tasks];
                        newTasks[taskIndex].completed = !newTasks[taskIndex].completed;
                        return { ...order, tasks: newTasks };
                    }
                    return order;
                }));
            };

            const updateOrderStatus = (orderId, newStatus) => {
                setOrders(orders.map(order => 
                    order.id === orderId ? { ...order, status: newStatus } : order
                ));
            };

            const getSalesStats = () => {
                const stats = {};
                
                salesReps.forEach(rep => {
                    stats[rep] = {};
                    orderTypes.forEach(type => {
                        stats[rep][type] = orders.filter(o => o.salesRep === rep && o.orderType === type).length;
                    });
                    stats[rep].total = orders.filter(o => o.salesRep === rep).length;
                });

                return stats;
            };

            const downloadCSV = () => {
                let csv = 'Order Number,Patient Name,Order Type,Sales Rep,Date Received,Status,Tasks Completed\r\n';
                
                orders.forEach(order => {
                    const completedTasks = order.tasks.filter(t => t.completed).length;
                    const totalTasks = order.tasks.length;
                    csv += `${order.orderNumber},${order.patientName},${order.orderType},${order.salesRep},${order.dateReceived},${order.status},${completedTasks}/${totalTasks}\r\n`;
                });

                const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.setAttribute('href', url);
                link.setAttribute('download', 'dme_orders.csv');
                link.style.visibility = 'hidden';
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                URL.revokeObjectURL(url);
            };

            const salesStats = getSalesStats();

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6">
                    <div className="max-w-7xl mx-auto">
                        <div className="bg-white rounded-lg shadow-xl overflow-hidden">
                            <div className="bg-gradient-to-r from-indigo-600 to-blue-600 p-6 text-white">
                                <h1 className="text-3xl font-bold">DME Order Management System</h1>
                                <p className="text-indigo-100 mt-2">Track orders, manage tasks, and monitor sales performance</p>
                            </div>

                            <div className="flex border-b">
                                <button
                                    onClick={() => setActiveTab('orders')}
                                    className={`flex items-center gap-2 px-6 py-4 font-semibold transition-colors ${
                                        activeTab === 'orders' 
                                            ? 'bg-white text-indigo-600 border-b-2 border-indigo-600' 
                                            : 'bg-gray-50 text-gray-600 hover:bg-gray-100'
                                    }`}
                                >
                                    üìã Order Task List
                                </button>
                                <button
                                    onClick={() => setActiveTab('sales')}
                                    className={`flex items-center gap-2 px-6 py-4 font-semibold transition-colors ${
                                        activeTab === 'sales' 
                                            ? 'bg-white text-indigo-600 border-b-2 border-indigo-600' 
                                            : 'bg-gray-50 text-gray-600 hover:bg-gray-100'
                                    }`}
                                >
                                    üìà Sales Dashboard
                                </button>
                            </div>

                            {activeTab === 'orders' && (
                                <div className="p-6">
                                    <div className="flex justify-between items-center mb-6">
                                        <h2 className="text-2xl font-bold text-gray-800">Order Task Management</h2>
                                        <button
                                            onClick={downloadCSV}
                                            className="flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors"
                                        >
                                            ‚¨áÔ∏è Export CSV
                                        </button>
                                    </div>

                                    <div className="bg-gray-50 p-4 rounded-lg mb-6">
                                        <h3 className="font-semibold text-gray-700 mb-3">Add New Order</h3>
                                        <div className="grid grid-cols-2 md:grid-cols-3 gap-3">
                                            <input
                                                type="text"
                                                placeholder="Order Number"
                                                value={newOrder.orderNumber}
                                                onChange={(e) => setNewOrder({...newOrder, orderNumber: e.target.value})}
                                                className="px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"
                                            />
                                            <input
                                                type="text"
                                                placeholder="Patient Name"
                                                value={newOrder.patientName}
                                                onChange={(e) => setNewOrder({...newOrder, patientName: e.target.value})}
                                                className="px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"
                                            />
                                            <select
                                                value={newOrder.orderType}
                                                onChange={(e) => setNewOrder({...newOrder, orderType: e.target.value})}
                                                className="px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"
                                            >
                                                {orderTypes.map(type => <option key={type} value={type}>{type}</option>)}
                                            </select>
                                            <select
                                                value={newOrder.salesRep}
                                                onChange={(e) => setNewOrder({...newOrder, salesRep: e.target.value})}
                                                className="px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"
                                            >
                                                {salesReps.map(rep => <option key={rep} value={rep}>{rep}</option>)}
                                            </select>
                                            <input
                                                type="date"
                                                value={newOrder.dateReceived}
                                                onChange={(e) => setNewOrder({...newOrder, dateReceived: e.target.value})}
                                                className="px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500"
                                            />
                                            <button
                                                onClick={addOrder}
                                                className="flex items-center justify-center gap-2 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors"
                                            >
                                                ‚ûï Add Order
                                            </button>
                                        </div>
                                    </div>

                                    <div className="space-y-4">
                                        {orders.map(order => (
                                            <div key={order.id} className="border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow">
                                                <div className="flex justify-between items-start mb-3">
                                                    <div>
                                                        <h3 className="font-bold text-lg text-gray-800">{order.orderNumber}</h3>
                                                        <p className="text-gray-600">{order.patientName} - {order.orderType}</p>
                                                        <p className="text-sm text-gray-500">Sales Rep: {order.salesRep} | Received: {order.dateReceived}</p>
                                                    </div>
                                                    <div className="flex items-center gap-2">
                                                        <select
                                                            value={order.status}
                                                            onChange={(e) => updateOrderStatus(order.id, e.target.value)}
                                                            className={`px-3 py-1 rounded-full text-sm font-semibold ${
                                                                order.status === 'New' ? 'bg-blue-100 text-blue-700' :
                                                                order.status === 'In Progress' ? 'bg-yellow-100 text-yellow-700' :
                                                                order.status === 'Completed' ? 'bg-green-100 text-green-700' :
                                                                'bg-gray-100 text-gray-700'
                                                            }`}
                                                        >
                                                            {statuses.map(status => <option key={status} value={status}>{status}</option>)}
                                                        </select>
                                                        <button
                                                            onClick={() => deleteOrder(order.id)}
                                                            className="text-red-600 hover:bg-red-50 p-2 rounded-lg transition-colors"
                                                        >
                                                            üóëÔ∏è
                                                        </button>
                                                    </div>
                                                </div>
                                                
                                                <div className="space-y-2">
                                                    {order.tasks.map((task, idx) => (
                                                        <div key={idx} className="flex items-center gap-3">
                                                            <input
                                                                type="checkbox"
                                                                checked={task.completed}
                                                                onChange={() => toggleTask(order.id, idx)}
                                                                className="w-5 h-5 text-indigo-600 rounded focus:ring-2 focus:ring-indigo-500"
                                                            />
                                                            <span className={`flex-1 ${task.completed ? 'line-through text-gray-400' : 'text-gray-700'}`}>
                                                                {task.task}
                                                            </span>
                                                        </div>
                                                    ))}
                                                </div>
                                                
                                                <div className="mt-3 pt-3 border-t border-gray-200">
                                                    <div className="flex items-center gap-2">
                                                        <div className="flex-1 bg-gray-200 rounded-full h-2">
                                                            <div 
                                                                className="bg-indigo-600 h-2 rounded-full transition-all"
                                                                style={{ width: `${(order.tasks.filter(t => t.completed).length / order.tasks.length) * 100}%` }}
                                                            />
                                                        </div>
                                                        <span className="text-sm font-semibold text-gray-600">
                                                            {order.tasks.filter(t => t.completed).length}/{order.tasks.length}
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            )}

                            {activeTab === 'sales' && (
                                <div className="p-6">
                                    <h2 className="text-2xl font-bold text-gray-800 mb-6">Sales Performance Dashboard</h2>
                                    
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                                        <div className="bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg p-6 text-white">
                                            <h3 className="text-lg font-semibold mb-2">Total Orders</h3>
                                            <p className="text-4xl font-bold">{orders.length}</p>
                                        </div>
                                        <div className="bg-gradient-to-br from-green-500 to-green-600 rounded-lg p-6 text-white">
                                            <h3 className="text-lg font-semibold mb-2">Completed Orders</h3>
                                            <p className="text-4xl font-bold">{orders.filter(o => o.status === 'Completed').length}</p>
                                        </div>
                                    </div>

                                    <div className="bg-white border border-gray-200 rounded-lg overflow-hidden">
                                        <div className="overflow-x-auto">
                                            <table className="w-full">
                                                <thead className="bg-gradient-to-r from-indigo-600 to-blue-600 text-white">
                                                    <tr>
                                                        <th className="px-4 py-3 text-left font-semibold">Sales Rep</th>
                                                        {orderTypes.map(type => (
                                                            <th key={type} className="px-4 py-3 text-center font-semibold">{type}</th>
                                                        ))}
                                                        <th className="px-4 py-3 text-center font-semibold bg-indigo-700">Total</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    {salesReps.map((rep, idx) => (
                                                        <tr key={rep} className={idx % 2 === 0 ? 'bg-gray-50' : 'bg-white'}>
                                                            <td className="px-4 py-3 font-semibold text-gray-800">{rep}</td>
                                                            {orderTypes.map(type => (
                                                                <td key={type} className="px-4 py-3 text-center text-gray-700">
                                                                    {salesStats[rep][type]}
                                                                </td>
                                                            ))}
                                                            <td className="px-4 py-3 text-center font-bold text-indigo-600 bg-indigo-50">
                                                                {salesStats[rep].total}
                                                            </td>
                                                        </tr>
                                                    ))}
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>

                                    <div className="mt-6">
                                        <h3 className="text-xl font-bold text-gray-800 mb-4">Orders by Type</h3>
                                        <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                                            {orderTypes.map(type => {
                                                const count = orders.filter(o => o.orderType === type).length;
                                                return (
                                                    <div key={type} className="bg-white border-2 border-indigo-200 rounded-lg p-4 text-center">
                                                        <p className="text-gray-600 text-sm mb-1">{type}</p>
                                                        <p className="text-3xl font-bold text-indigo-600">{count}</p>
                                                    </div>
                                                );
                                            })}
                                        </div>
                                    </div>
                                </div>
                            )}
                        </div>
                    </div>
                </div>
            );
        };

        ReactDOM.render(<DMEOrderSystem />, document.getElementById('root'));
    </script>
</body>
</html>
